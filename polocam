-- Camlock script

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

local Locked = true
local CamlockState = true

getgenv().Key = Enum.KeyCode.Q

function FindNearestEnemy()
local ClosestDistance, ClosestPart = math.huge, nil
local CenterPosition = Vector2.new(
    game:GetService("GuiService"):GetScreenResolution().X / 2,
    game:GetService("GuiService"):GetScreenResolution().Y / 2
)

for _, Player in ipairs(Players:GetPlayers()) do
    if Player ~= LocalPlayer then
        local Character = Player.Character
        if Character and Character:FindFirstChild("HumanoidRootPart") and Character.Humanoid.Health > 0 then
            local part = Character:FindFirstChild(SelectedPart)
            if part then
                local Position, IsVisibleOnViewport = Camera:WorldToViewportPoint(part.Position)

                if IsVisibleOnViewport then
                    local Distance = (CenterPosition - Vector2.new(Position.X, Position.Y)).Magnitude
                    if Distance < ClosestDistance then
                        ClosestPart = part
                        ClosestDistance = Distance
                    end
                end
            end
        end
    end
end

return ClosestPart
end

local enemy = nil

RunService.Heartbeat:Connect(function()
if CamlockState and enemy then
    if enemy.Parent and enemy.Parent:FindFirstChild(SelectedPart) then
        local targetPosition = enemy.Parent[SelectedPart].Position + enemy.Parent[SelectedPart].Velocity * Prediction
        targetPosition = Vector3.new(targetPosition.X + XPrediction, targetPosition.Y + YPrediction, targetPosition.Z)

        local currentPosition = Camera.CFrame.Position
        local newPosition = currentPosition:Lerp(targetPosition, Smoothness)

        Camera.CFrame = CFrame.new(newPosition, targetPosition)
    end
end
end)

UserInputService.InputBegan:Connect(function(input)
if input.KeyCode == getgenv().Key then
    Locked = not Locked
    if Locked then
        enemy = FindNearestEnemy()
        CamlockState = true
        SendNotification("Locking On " .. (enemy.Parent and enemy.Parent.Name or "Unknown Player"))
        TextButton.Image = "rbxassetid://72590084838674"
    else
        if enemy then
            enemy = nil
            CamlockState = false
            SendNotification("Unlocked")
        end
        TextButton.Image = "rbxassetid://105713683367381"
    end
end
end)

local PolosGui = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local UICornerFrame = Instance.new("UICorner")
local TextButton = Instance.new("ImageButton")
local UICornerButton = Instance.new("UICorner")
local CircleButton = Instance.new("ImageButton")
local UICornerCircle = Instance.new("UICorner")

PolosGui.Name = "PolosGui"
PolosGui.Parent = game.CoreGui
PolosGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

Frame.Parent = PolosGui
Frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Frame.BorderColor3 = Color3.fromRGB(0, 0, 0)
Frame.BorderSizePixel = 0
Frame.Position = UDim2.new(0.5, -82.5, 0.5, -42.5)  -- Center the frame on the screen
Frame.Size = UDim2.new(0, 165, 0, 85)  -- Reduced height
Frame.AnchorPoint = Vector2.new(0.5, 0.5)  -- Anchor point set to center
Frame.Active = true
Frame.Draggable = true

UICornerFrame.Parent = Frame
UICornerFrame.CornerRadius = UDim.new(0, 10)  -- Rounded corners for the Frame

TextButton.Parent = Frame
TextButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
TextButton.BackgroundTransparency = 0.5
TextButton.BorderColor3 = Color3.fromRGB(0, 0, 0)
TextButton.BorderSizePixel = 0
TextButton.Position = UDim2.new(0.5, -70, 0.1, 0)  -- Center the text button within the frame
TextButton.Size = UDim2.new(0, 140, 0, 67)  -- Adjusted size
TextButton.Image = "rbxassetid://105713683367381"
TextButton.ScaleType = Enum.ScaleType.Fit
TextButton.ImageTransparency = 0.5
TextButton.MouseButton1Click:Connect(function()
Locked = not Locked
if Locked then
    enemy = FindNearestEnemy()
    CamlockState = true
    SendNotification("Locking On " .. (enemy.Parent and enemy.Parent.Name or "Unknown Player"))
    TextButton.Image = "rbxassetid://72590084838674"
else
    if enemy then
        enemy = nil
        CamlockState = false
        SendNotification("Unlocked")
    end
    TextButton.Image = "rbxassetid://105713683367381"
end
end)

UICornerButton.Parent = TextButton
UICornerButton.CornerRadius = UDim.new(0, 10)

local VirtualInputManager = game:GetService("VirtualInputManager")
local CoreGui = game:GetService("CoreGui")
local UserInputService = game:GetService("UserInputService")
